(this["webpackJsonpai-runner"]=this["webpackJsonpai-runner"]||[]).push([[0],{100:function(e,t,a){e.exports=a(276)},105:function(e,t,a){},106:function(e,t,a){},272:function(e,t,a){},276:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(33),c=a.n(o),i=(a(105),a(35)),s=a(36),l=a(95),u=a(94),m=a(5),p=(a(106),a(4)),f=a(13),d=a(22),g=a(38),v=a.n(g),E=a(23),b=a.n(E),y=a(39),h=a(15),O=a.n(h),k=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).API_URL,w=new(function(){function e(){Object(i.a)(this,e)}return Object(s.a)(e,[{key:"login",value:function(){var e=Object(y.a)(b.a.mark((function e(t,a){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.a.post(k+"/api/auth/login",{username:t,password:a});case 2:return(n=e.sent).data.accessToken&&localStorage.setItem("user",JSON.stringify(n.data)),e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"logout",value:function(){localStorage.removeItem("user"),localStorage.removeItem("key")}},{key:"register",value:function(e,t){return O.a.post(k+"/api/auth/register",{username:e,password:t,message:""})}}]),e}()),j=a(40),N={username:"",password:"",accessToken:""},S={user:N,isLoggedIn:!1},x=Object(j.b)({name:"user",initialState:S,reducers:{login:function(e,t){e.user.username=t.payload.username,e.user.password=t.payload.password,e.user.accessToken=t.payload.accessToken,e.isLoggedIn=!0},logout:function(e){e.user=N,e.isLoggedIn=!1}}}),_=x.actions,C=_.login,B=_.logout,I=x.reducer,A=function(e,t){return w.login(t.username,t.password).then((function(t){e(C(t))}))};var T=function(e){var t=Object(n.useState)(!1),a=Object(p.a)(t,2),o=a[0],c=a[1];return o?null:r.a.createElement("div",{className:"helper-box"},r.a.createElement("div",{className:"left-item"}),r.a.createElement("div",{className:e.warning?"helper-box-text-warning":"helper-box-text-confirm"},e.content),r.a.createElement("div",{className:"helper-box-button-container"},r.a.createElement("button",{className:"helper-box-button",onClick:function(){c(!0),e.onClose()}},"X")))},D=a(21),L=a.n(D),P=a(18),F=a.n(P);var z=function(){var e=Object(n.useState)(""),t=Object(p.a)(e,2),a=t[0],o=t[1],c=Object(n.useState)(""),i=Object(p.a)(c,2),s=i[0],l=i[1],u=Object(n.useState)(""),g=Object(p.a)(u,2),E=g[0],b=g[1],y=Object(n.useState)(!1),h=Object(p.a)(y,2),O=h[0],k=h[1],w=Object(n.useState)(!1),j=Object(p.a)(w,2),N=j[0],S=j[1],x=window.location.search,_=new URLSearchParams(x).get("popup"),C=Object(d.b)(),B=function(){return F.a.isEmail(a,{ignore_max_length:!1})?!(!F.a.isLength(s,{min:8,max:50})||!F.a.isStrongPassword(s))||(b("Password is not valid!"),!1):(b("Email format is not valid!"),!1)};return N?r.a.createElement(m.a,{to:"/crypto"}):r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"wrapper"},"t"==_&&r.a.createElement(T,{content:"Thanks for registration. Now you can login!"})),r.a.createElement("div",{className:"landing-page-wrapper"},r.a.createElement(L.a,{delay:250},r.a.createElement("div",{className:"landing-page"},r.a.createElement("div",{className:"landing-page-text"},"Secure Storage"),r.a.createElement("div",{className:"login-form"},r.a.createElement("img",{className:"logo",src:v.a,alt:"logo_but"}),r.a.createElement("div",{className:"login-page-content"},r.a.createElement("form",{onSubmit:function(e){(e.preventDefault(),k(!0),B())?A(C,{username:a,password:s,accessToken:""}).then((function(e){S(!0)}),(function(e){S(!1),k(!1);var t="";e&&e.response&&e.response.data.message?t=e.response.data.message:e.message?t=e.message:e.toString()&&(t=e.toString()),b(t)})):k(!1)}},r.a.createElement("div",{className:"login-item"},r.a.createElement("input",{type:"text",className:"input-text",name:"email",placeholder:"Email",value:a,onChange:function(e){o(e.target.value)}})),r.a.createElement("div",{className:"login-item"},r.a.createElement("input",{type:"password",className:"input-text",name:"password",placeholder:"Password",value:s,onChange:function(e){l(e.target.value)}})),r.a.createElement("div",{className:"login-item"},r.a.createElement("button",{className:"submit-button",disabled:O},r.a.createElement("span",null,"Login"))),E&&r.a.createElement("div",{className:"login-item"},r.a.createElement("div",{className:"alert-text"},E))),r.a.createElement("div",{className:"login-link"},r.a.createElement("p",{className:"login-link-text"},"Do not have an account?"),r.a.createElement(f.b,{className:"login-link-reference",to:"/register"},"Register"))))))))},R=function(e,t){return w.register(e,t)};var U=function(){var e=Object(n.useState)(""),t=Object(p.a)(e,2),a=t[0],o=t[1],c=Object(n.useState)(""),i=Object(p.a)(c,2),s=i[0],l=i[1],u=Object(n.useState)(""),d=Object(p.a)(u,2),g=d[0],E=d[1],b=Object(n.useState)(!1),y=Object(p.a)(b,2),h=(y[0],y[1]),O=Object(n.useState)(!1),k=Object(p.a)(O,2),w=k[0],j=k[1],N=function(){return F.a.isEmail(a,{ignore_max_length:!1})?!(!F.a.isLength(s,{min:8,max:50})||!F.a.isStrongPassword(s))||(E("Password is not valid!"),!1):(E("Email format is not valid!"),!1)};return w?r.a.createElement(m.a,{to:"/login?popup=t"}):r.a.createElement("div",null,r.a.createElement(L.a,null,r.a.createElement("div",{className:"register-page"},r.a.createElement("img",{className:"logo",src:v.a,alt:"logo_but"}),r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),h(!0),j(!1),N()?R(a,s).then((function(){j(!0)}),(function(e){var t="";e&&e.response&&e.response.data.message?t=e.response.data.message:e.message?(console.log(e.message),t=e.message):e.toString()&&(t=e.toString()),E(t),h(!1)})):h(!1)}},r.a.createElement("div",null,r.a.createElement("div",{className:"register-item email-text"},r.a.createElement("input",{type:"text",className:"input-text",name:"email",placeholder:"Email",value:a,onChange:function(e){o(e.target.value)}})),r.a.createElement("div",{className:"register-item password-text"},r.a.createElement("input",{type:"password",className:"input-text",name:"password",placeholder:"Password",value:s,onChange:function(e){l(e.target.value)}})),r.a.createElement("div",{className:"register-item"},r.a.createElement("button",{className:"submit-button"},"Sign Up"))),""!==g&&r.a.createElement("div",{className:"register-item"},r.a.createElement("div",{className:"alert-text"},g))),r.a.createElement("div",{className:"register-link"},r.a.createElement("p",{className:"register-link-text"},"Already have an account?"),r.a.createElement(f.b,{className:"register-link-reference",to:"/login"},"Login")))))},W=a(7),J=Object(W.a)(),K=a(41),M=a(57),G=a.n(M),H=a(24),V=a.n(H);a(272),a(273);function Y(){var e=JSON.parse(localStorage.getItem("user")||"{}");return e&&e.accessToken?{Authorization:"Bearer "+e.accessToken}:{}}var X=function(){return O.a.get(k+"/api/dataset",{headers:Y()})},q=function(e){return O.a.post(k+"/api/dataset/createdirectory",e,{headers:{Authorization:Y().Authorization,"Content-type":"application/json; charset=utf-8"}})},Q=function(e){var t=new FormData,a=[];e.forEach((function(e){a.push(e.name)}));var n={keys:a};t.append("keys",new Blob([JSON.stringify(n)],{type:"application/json"}));for(var r=0,o=Object.keys(e);r<o.length;r++){var c=o[r];"length"!==c&&t.append("files",e[c])}return O.a.post(k+"/api/dataset/uploadfiles",t,{headers:Y()})},Z=function(e){return O.a.post(k+"/api/dataset/files/delete",e,{headers:{Authorization:Y().Authorization,"Content-type":"application/json; charset=utf-8"}})},$=function(e){return O.a.post(k+"/api/dataset/download",e,{headers:{Authorization:Y().Authorization,"Content-type":"application/json; charset=utf-8"},responseType:"blob"})},ee=a(91),te=a.n(ee),ae=(a(28),function(e,t){var a=!1;return t.forEach((function(t){e.substr(0,t.length)!==t||(a=!0)})),a}),ne=function(e,t){var a=!1;return t.forEach((function(t){t!==e||(a=!0)})),a},re=function(e,t,a){var n=t.map((function(e){var t=a;return""!==a&&"/"!==a.substring(a.length-1)&&(t+="/"),{key:t+=e.name,size:e.size,modified:+V()().unix(),data:e}})),r=[];return n.map((function(t){var a=!1;e.map((function(e){e.key===t.key&&(a=!0)})),a||r.push(t)})),r},oe=function(e,t){return e.filter((function(e){return!ae(e.key,t)}))},ce=function(e,t){return e.filter((function(e){return!ne(e.key,t)}))},ie=function e(t,a){var n=[];return t.forEach((function(r){r.key!==a&&r.key.substr(0,a.length)===a&&(r.key.endsWith("/")?e(t,r.key).forEach((function(e){n.includes(e)||n.push(e)})):n.includes(r.key)||n.push(r.key))})),n},se=function(e,t){var a=[];return t.forEach((function(t){(function(e,t){return e.filter((function(e){return e.key!==t&&e.key.substr(0,t.length)===t})).map((function(e){return e.key}))})(e,t).forEach((function(e){a.includes(e)||a.push(e)}))})),a},le=a(6),ue=a.n(le),me=function(e){var t=ue.a.utils.hex.toBytes(localStorage.getItem("crypto_key")),a=new ue.a.ModeOfOperation.ctr(t);return ue.a.utils.hex.fromBytes(a.encrypt(e))},pe=function(e){var t=ue.a.utils.hex.toBytes(localStorage.getItem("crypto_key")),a=new ue.a.ModeOfOperation.ctr(t);return ue.a.utils.hex.fromBytes(a.decrypt(e))},fe=function(e){var t=ue.a.utils.hex.toBytes(localStorage.getItem("crypto_key"));return new ue.a.ModeOfOperation.ctr(t).encrypt(e)},de=function(e){var t=ue.a.utils.hex.toBytes(localStorage.getItem("crypto_key"));return new ue.a.ModeOfOperation.ctr(t).decrypt(e)};var ge=function(e){var t=Object(n.useState)(!1),a=Object(p.a)(t,2),o=a[0],c=a[1],i=Object(n.useState)([]),s=Object(p.a)(i,2),l=s[0],u=s[1],m=Object(n.useState)(""),f=Object(p.a)(m,2),d=(f[0],f[1]);Object(n.useEffect)((function(){X().then((function(e){var t=[];e.data&&e.data.forEach((function(e){var a=function(e){for(var t=e.toString(),a="",n=0;n<t.length;n+=2)a+=String.fromCharCode(parseInt(t.substr(n,2),16));return a}(pe(ue.a.utils.hex.toBytes(e.key)));a.endsWith("/")?t.push({key:a}):(e.key=a,t.push(e))})),u(t),c(!0)}),(function(e){d(e.message),c(!0)}))}),[]);var g=function(e){var t=[];e.forEach((function(e){e.endsWith("/")?ie(l,e).forEach((function(e){t.includes(e)||t.push(e)})):t.includes(e)||t.push(e)}));var a=new Map;t.forEach((function(e){a.set(e,me(ue.a.utils.utf8.toBytes(e)))})),a.forEach((function(e,t){$(e).then((function(e){var a=new FileReader;a.onload=function(e){var a=de(new Uint8Array(e.target.result)),n=new Blob([a]),r=document.createElement("a");r.href=window.URL.createObjectURL(n),r.download=t.substr(t.lastIndexOf("/")+1,t.length),r.click()},a.readAsArrayBuffer(e.data)}))}))};return o?r.a.createElement("div",null,r.a.createElement(L.a,null,r.a.createElement("div",{className:"file-editor-wrapper"},r.a.createElement(G.a,{files:l.map((function(e){var t=e.modified?e.modified:0;if(0!==t){var a=V.a.duration(1e3*t);return{key:e.key,modified:+a,size:e.size}}return{key:e.key}})),icons:M.Icons.FontAwesome(4),detailRenderer:function(){return null},onCreateFolder:function(e){var t={key:e};u((function(e){return[].concat(Object(K.a)(e),[t])}));var a={key:me(ue.a.utils.utf8.toBytes(e))};q(a)},onCreateFiles:function(t,a){for(var n=0;n<t.length;n++)if(!t[n].name.includes("."))return void e.onWarning("Dear user, please drag & drop files only. You can create a folder by clicking on 'Add Folder' button.");c(!1);var r,o=re(l,t,a);o.forEach(function(){var e=Object(y.a)(b.a.mark((function e(t){var a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===(a=t.data)||void 0===a?void 0:a.arrayBuffer().then((function(e){r={key:me(ue.a.utils.utf8.toBytes(t.key)),data:fe(new Uint8Array(e))};var a=new File([r.data],r.key);Q([a])}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),u((function(e){return[].concat(Object(K.a)(e),Object(K.a)(o))})),c(!0)},onDeleteFolder:function(e){var t=se(l,e);e.forEach((function(e){t.includes(e)||t.push(e)})),Z(t.map((function(e){return me(ue.a.utils.utf8.toBytes(e))}))).then((function(){u(oe(l,e))}))},onDeleteFile:function(e){Z(e.map((function(e){return me(ue.a.utils.utf8.toBytes(e))}))).then((function(){u(ce(l,e))}))},onDownloadFile:function(e){g(e)},onDownloadFolder:function(e){g(e)}})))):r.a.createElement(L.a,null,r.a.createElement("div",{className:"loading-animation-wrapper"},r.a.createElement("img",{className:"dataset-loading-animation",src:te.a,alt:"loadingAnimation"})))};var ve=function(e){w.logout(),e(B())},Ee=a(92),be=a.n(Ee);var ye=function(e){var t=Object(m.g)(),a=Object(d.b)();return r.a.createElement("div",null,r.a.createElement("nav",{className:"upper-navbar"},r.a.createElement("a",{className:"logo-container",href:"/files"},r.a.createElement("img",{className:"logo-simple",src:be.a,alt:"logo_but"})),r.a.createElement(f.b,{to:"/files",className:"upper-navbar-item"},"Storage"),r.a.createElement("a",{className:"upper-navbar-item-logout"},r.a.createElement("button",{className:"upper-navbar-logout-button",onClick:function(e){e.preventDefault(),ve(a),t.push("/login"),window.location.reload()}},r.a.createElement(f.b,{to:"/logout"},"Logout")))))};var he=function(){var e=Object(n.useState)(""),t=Object(p.a)(e,2),a=t[0],o=t[1];return r.a.createElement("div",null,r.a.createElement("div",{className:"wrapper"},r.a.createElement(T,{content:"Your secret key is: "+localStorage.getItem("crypto_key"),onClose:function(){return null}}),a&&r.a.createElement(T,{content:a,warning:!0,onClose:function(){o("")}}),r.a.createElement(ye,null)),r.a.createElement(ge,{onWarning:function(e){return o(e)}}))},Oe=a(96),ke=["component"],we=function(e){var t=e.component,a=Object(Oe.a)(e,ke);return r.a.createElement(m.b,Object.assign({},a,{render:function(e){return localStorage.user?r.a.createElement(t,e):r.a.createElement(m.a,{to:"/login"})}}))},je=a(93),Ne=a.n(je),Se=function(){var e=Object(m.g)(),t=Object(n.useState)(""),a=Object(p.a)(t,2),o=a[0],c=a[1],i=Object(n.useState)(""),s=Object(p.a)(i,2),l=s[0],u=s[1];return r.a.createElement("div",null,r.a.createElement("div",{className:"wrapper"},r.a.createElement(T,{content:"Dear user, please paste your secret key below or if this is your first time here, generate a new one.",onClose:function(){return null}})),r.a.createElement("div",{className:"crypto-wrapper"},l&&r.a.createElement("div",{className:"warning-test"},l),r.a.createElement("div",{className:"crypto-item"},r.a.createElement("input",{type:"text",className:"input-text-wide crypto-item",name:"cryptoKey",placeholder:"Paste your key here or generate a new one",value:o,onChange:function(e){u("");var t=e.target.value;localStorage.setItem("crypto_key",t),c(t)}}),o&&r.a.createElement("button",{onClick:function(){return navigator.clipboard.writeText(o)},className:"copy-button"},r.a.createElement("img",{className:"copy-icon",src:Ne.a,alt:"copyToClipboard"}))),r.a.createElement("button",{className:"submit-button crypto-item",onClick:function(){u("Please copy the key to your local storage and keep it safe.");var e=function(){var e=new Uint8Array(32);return window.crypto.getRandomValues(e),ue.a.utils.hex.fromBytes(e)}();localStorage.setItem("crypto_key",e),c(e)}},r.a.createElement("span",null,"Generate Random Key")),r.a.createElement("button",{className:"submit-button green crypto-item",onClick:function(){e.push("files")},disabled:64!==o.length},r.a.createElement("span",null,"Go see my files!"))))},xe=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("style",null,"@import url('https://fonts.googleapis.com/css2?family=Lato&display=swap');"),r.a.createElement(m.c,{history:J},r.a.createElement("div",{className:"navigation-page"},r.a.createElement(m.d,null,r.a.createElement(we,{exact:!0,path:["/"],component:he}),r.a.createElement(m.b,{exact:!0,path:"/login",component:z}),r.a.createElement(m.b,{exact:!0,path:"/register",component:U}),r.a.createElement(m.b,{exact:!0,path:"/logout",component:z}),r.a.createElement(we,{exact:!0,path:"/crypto",component:Se}),r.a.createElement(we,{exact:!0,path:"/files",component:he})))))}}]),a}(n.Component),_e=a(27),Ce=Object(j.a)({reducer:{user:I},middleware:[_e.a]});c.a.render(r.a.createElement(d.a,{store:Ce},r.a.createElement(f.a,null,r.a.createElement(xe,null))),document.getElementById("root"))},38:function(e,t,a){e.exports=a.p+"static/media/logo_but_text.4c1b23d0.png"},91:function(e,t,a){e.exports=a.p+"static/media/loading_graphics.400f11c8.gif"},92:function(e,t,a){e.exports=a.p+"static/media/vut_simple_logo.c91edadd.png"},93:function(e,t,a){e.exports=a.p+"static/media/copy_icon.8f4897a3.svg"}},[[100,1,2]]]);
//# sourceMappingURL=main.74fefa4a.chunk.js.map