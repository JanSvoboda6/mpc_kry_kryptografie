{"ast":null,"code":"\"use strict\";\n\nexports.__esModule = true;\nexports.default = useDrag;\n\nvar _react = require(\"react\");\n\nvar _event = require(\"@visx/event\");\n\nvar _useStateWithCallback2 = _interopRequireDefault(require(\"./util/useStateWithCallback\"));\n\nvar _clampNumber = _interopRequireDefault(require(\"./util/clampNumber\"));\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n/** Hook for dragging, returns a `UseDrag` object. */\n\n\nfunction useDrag(_temp) {\n  var _ref = _temp === void 0 ? {} : _temp,\n      _ref$resetOnStart = _ref.resetOnStart,\n      resetOnStart = _ref$resetOnStart === void 0 ? false : _ref$resetOnStart,\n      _ref$snapToPointer = _ref.snapToPointer,\n      snapToPointer = _ref$snapToPointer === void 0 ? true : _ref$snapToPointer,\n      onDragEnd = _ref.onDragEnd,\n      onDragMove = _ref.onDragMove,\n      onDragStart = _ref.onDragStart,\n      x = _ref.x,\n      y = _ref.y,\n      dx = _ref.dx,\n      dy = _ref.dy,\n      isDragging = _ref.isDragging,\n      _ref$restrict = _ref.restrict,\n      restrict = _ref$restrict === void 0 ? {} : _ref$restrict; // use ref to detect prop changes\n\n\n  var positionPropsRef = (0, _react.useRef)({\n    x: x,\n    y: y,\n    dx: dx,\n    dy: dy\n  });\n  var xMin = restrict.xMin,\n      xMax = restrict.xMax,\n      yMin = restrict.yMin,\n      yMax = restrict.yMax;\n  var clampX = (0, _react.useCallback)(function (num) {\n    return (0, _clampNumber.default)(num, xMin != null ? xMin : -Infinity, xMax != null ? xMax : Infinity);\n  }, [xMax, xMin]);\n  var clampY = (0, _react.useCallback)(function (num) {\n    return (0, _clampNumber.default)(num, yMin != null ? yMin : -Infinity, yMax != null ? yMax : Infinity);\n  }, [yMax, yMin]);\n\n  var _useStateWithCallback = (0, _useStateWithCallback2.default)({\n    x: x,\n    y: y,\n    dx: dx != null ? dx : 0,\n    dy: dy != null ? dy : 0,\n    isDragging: false\n  }),\n      dragState = _useStateWithCallback[0],\n      setDragStateWithCallback = _useStateWithCallback[1]; // Track distance between pointer on dragStart and position of element being dragged\n\n\n  var _useState = (0, _react.useState)({\n    x: 0,\n    y: 0\n  }),\n      dragStartPointerOffset = _useState[0],\n      setDragStartPointerOffset = _useState[1]; // if prop position changes, update state\n\n\n  (0, _react.useEffect)(function () {\n    if (positionPropsRef.current.x !== x || positionPropsRef.current.y !== y || positionPropsRef.current.dx !== dx || positionPropsRef.current.dy !== dy) {\n      positionPropsRef.current = {\n        x: x,\n        y: y,\n        dx: dx,\n        dy: dy\n      };\n      setDragStateWithCallback(function (currState) {\n        return _extends({}, currState, {\n          x: x,\n          y: y,\n          dx: dx != null ? dx : 0,\n          dy: dy != null ? dy : 0\n        });\n      });\n    }\n  });\n  (0, _react.useEffect)(function () {\n    if (isDragging !== undefined && dragState.isDragging !== isDragging) {\n      setDragStateWithCallback(function (currState) {\n        return _extends({}, currState, {\n          isDragging: isDragging\n        });\n      });\n    }\n  }, [dragState.isDragging, isDragging, setDragStateWithCallback]);\n  var handleDragStart = (0, _react.useCallback)(function (event) {\n    event.persist();\n    setDragStateWithCallback(function (currState) {\n      var currentPoint = {\n        x: (currState.x || 0) + currState.dx,\n        y: (currState.y || 0) + currState.dy\n      };\n      var eventPoint = (0, _event.localPoint)(event) || {\n        x: 0,\n        y: 0\n      };\n      var point = snapToPointer ? eventPoint : currentPoint;\n      setDragStartPointerOffset({\n        x: currentPoint.x - eventPoint.x,\n        y: currentPoint.y - eventPoint.y\n      });\n      return {\n        isDragging: true,\n        dx: resetOnStart ? 0 : currState.dx,\n        dy: resetOnStart ? 0 : currState.dy,\n        x: resetOnStart ? clampX(point.x) : clampX(point.x) - currState.dx,\n        y: resetOnStart ? clampY(point.y) : clampY(point.y) - currState.dy\n      };\n    }, onDragStart && function (currState) {\n      onDragStart(_extends({}, currState, {\n        event: event\n      }));\n    });\n  }, [clampX, clampY, onDragStart, resetOnStart, setDragStateWithCallback, snapToPointer]);\n  var handleDragMove = (0, _react.useCallback)(function (event) {\n    event.persist();\n    setDragStateWithCallback(function (currState) {\n      var point = (0, _event.localPoint)(event) || {\n        x: 0,\n        y: 0\n      };\n      return currState.isDragging ? _extends({}, currState, {\n        isDragging: true,\n        dx: snapToPointer ? clampX(point.x) - (currState.x || 0) : clampX(point.x + dragStartPointerOffset.x) - (currState.x || 0),\n        dy: snapToPointer ? clampY(point.y) - (currState.y || 0) : clampY(point.y + dragStartPointerOffset.y) - (currState.y || 0)\n      }) : currState;\n    }, onDragMove && function (currState) {\n      if (currState.isDragging) onDragMove(_extends({}, currState, {\n        event: event\n      }));\n    });\n  }, [setDragStateWithCallback, onDragMove, snapToPointer, dragStartPointerOffset.x, dragStartPointerOffset.y, clampX, clampY]);\n  var handleDragEnd = (0, _react.useCallback)(function (event) {\n    event.persist();\n    setDragStateWithCallback(function (currState) {\n      return _extends({}, currState, {\n        isDragging: false\n      });\n    }, onDragEnd && function (currState) {\n      onDragEnd(_extends({}, currState, {\n        event: event\n      }));\n    });\n  }, [onDragEnd, setDragStateWithCallback]);\n  return _extends({}, dragState, {\n    dragEnd: handleDragEnd,\n    dragMove: handleDragMove,\n    dragStart: handleDragStart\n  });\n}","map":{"version":3,"sources":["/Users/jan/dev/thesis/ml_runner/react/ml-runner/node_modules/@visx/drag/lib/useDrag.js"],"names":["exports","__esModule","default","useDrag","_react","require","_event","_useStateWithCallback2","_interopRequireDefault","_clampNumber","obj","_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","apply","_temp","_ref","_ref$resetOnStart","resetOnStart","_ref$snapToPointer","snapToPointer","onDragEnd","onDragMove","onDragStart","x","y","dx","dy","isDragging","_ref$restrict","restrict","positionPropsRef","useRef","xMin","xMax","yMin","yMax","clampX","useCallback","num","Infinity","clampY","_useStateWithCallback","dragState","setDragStateWithCallback","_useState","useState","dragStartPointerOffset","setDragStartPointerOffset","useEffect","current","currState","undefined","handleDragStart","event","persist","currentPoint","eventPoint","localPoint","point","handleDragMove","handleDragEnd","dragEnd","dragMove","dragStart"],"mappings":"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","sourcesContent":["\"use strict\";\n\nexports.__esModule = true;\nexports.default = useDrag;\n\nvar _react = require(\"react\");\n\nvar _event = require(\"@visx/event\");\n\nvar _useStateWithCallback2 = _interopRequireDefault(require(\"./util/useStateWithCallback\"));\n\nvar _clampNumber = _interopRequireDefault(require(\"./util/clampNumber\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\n/** Hook for dragging, returns a `UseDrag` object. */\nfunction useDrag(_temp) {\n  var _ref = _temp === void 0 ? {} : _temp,\n      _ref$resetOnStart = _ref.resetOnStart,\n      resetOnStart = _ref$resetOnStart === void 0 ? false : _ref$resetOnStart,\n      _ref$snapToPointer = _ref.snapToPointer,\n      snapToPointer = _ref$snapToPointer === void 0 ? true : _ref$snapToPointer,\n      onDragEnd = _ref.onDragEnd,\n      onDragMove = _ref.onDragMove,\n      onDragStart = _ref.onDragStart,\n      x = _ref.x,\n      y = _ref.y,\n      dx = _ref.dx,\n      dy = _ref.dy,\n      isDragging = _ref.isDragging,\n      _ref$restrict = _ref.restrict,\n      restrict = _ref$restrict === void 0 ? {} : _ref$restrict;\n\n  // use ref to detect prop changes\n  var positionPropsRef = (0, _react.useRef)({\n    x: x,\n    y: y,\n    dx: dx,\n    dy: dy\n  });\n  var xMin = restrict.xMin,\n      xMax = restrict.xMax,\n      yMin = restrict.yMin,\n      yMax = restrict.yMax;\n  var clampX = (0, _react.useCallback)(function (num) {\n    return (0, _clampNumber.default)(num, xMin != null ? xMin : -Infinity, xMax != null ? xMax : Infinity);\n  }, [xMax, xMin]);\n  var clampY = (0, _react.useCallback)(function (num) {\n    return (0, _clampNumber.default)(num, yMin != null ? yMin : -Infinity, yMax != null ? yMax : Infinity);\n  }, [yMax, yMin]);\n\n  var _useStateWithCallback = (0, _useStateWithCallback2.default)({\n    x: x,\n    y: y,\n    dx: dx != null ? dx : 0,\n    dy: dy != null ? dy : 0,\n    isDragging: false\n  }),\n      dragState = _useStateWithCallback[0],\n      setDragStateWithCallback = _useStateWithCallback[1]; // Track distance between pointer on dragStart and position of element being dragged\n\n\n  var _useState = (0, _react.useState)({\n    x: 0,\n    y: 0\n  }),\n      dragStartPointerOffset = _useState[0],\n      setDragStartPointerOffset = _useState[1]; // if prop position changes, update state\n\n\n  (0, _react.useEffect)(function () {\n    if (positionPropsRef.current.x !== x || positionPropsRef.current.y !== y || positionPropsRef.current.dx !== dx || positionPropsRef.current.dy !== dy) {\n      positionPropsRef.current = {\n        x: x,\n        y: y,\n        dx: dx,\n        dy: dy\n      };\n      setDragStateWithCallback(function (currState) {\n        return _extends({}, currState, {\n          x: x,\n          y: y,\n          dx: dx != null ? dx : 0,\n          dy: dy != null ? dy : 0\n        });\n      });\n    }\n  });\n  (0, _react.useEffect)(function () {\n    if (isDragging !== undefined && dragState.isDragging !== isDragging) {\n      setDragStateWithCallback(function (currState) {\n        return _extends({}, currState, {\n          isDragging: isDragging\n        });\n      });\n    }\n  }, [dragState.isDragging, isDragging, setDragStateWithCallback]);\n  var handleDragStart = (0, _react.useCallback)(function (event) {\n    event.persist();\n    setDragStateWithCallback(function (currState) {\n      var currentPoint = {\n        x: (currState.x || 0) + currState.dx,\n        y: (currState.y || 0) + currState.dy\n      };\n      var eventPoint = (0, _event.localPoint)(event) || {\n        x: 0,\n        y: 0\n      };\n      var point = snapToPointer ? eventPoint : currentPoint;\n      setDragStartPointerOffset({\n        x: currentPoint.x - eventPoint.x,\n        y: currentPoint.y - eventPoint.y\n      });\n      return {\n        isDragging: true,\n        dx: resetOnStart ? 0 : currState.dx,\n        dy: resetOnStart ? 0 : currState.dy,\n        x: resetOnStart ? clampX(point.x) : clampX(point.x) - currState.dx,\n        y: resetOnStart ? clampY(point.y) : clampY(point.y) - currState.dy\n      };\n    }, onDragStart && function (currState) {\n      onDragStart(_extends({}, currState, {\n        event: event\n      }));\n    });\n  }, [clampX, clampY, onDragStart, resetOnStart, setDragStateWithCallback, snapToPointer]);\n  var handleDragMove = (0, _react.useCallback)(function (event) {\n    event.persist();\n    setDragStateWithCallback(function (currState) {\n      var point = (0, _event.localPoint)(event) || {\n        x: 0,\n        y: 0\n      };\n      return currState.isDragging ? _extends({}, currState, {\n        isDragging: true,\n        dx: snapToPointer ? clampX(point.x) - (currState.x || 0) : clampX(point.x + dragStartPointerOffset.x) - (currState.x || 0),\n        dy: snapToPointer ? clampY(point.y) - (currState.y || 0) : clampY(point.y + dragStartPointerOffset.y) - (currState.y || 0)\n      }) : currState;\n    }, onDragMove && function (currState) {\n      if (currState.isDragging) onDragMove(_extends({}, currState, {\n        event: event\n      }));\n    });\n  }, [setDragStateWithCallback, onDragMove, snapToPointer, dragStartPointerOffset.x, dragStartPointerOffset.y, clampX, clampY]);\n  var handleDragEnd = (0, _react.useCallback)(function (event) {\n    event.persist();\n    setDragStateWithCallback(function (currState) {\n      return _extends({}, currState, {\n        isDragging: false\n      });\n    }, onDragEnd && function (currState) {\n      onDragEnd(_extends({}, currState, {\n        event: event\n      }));\n    });\n  }, [onDragEnd, setDragStateWithCallback]);\n  return _extends({}, dragState, {\n    dragEnd: handleDragEnd,\n    dragMove: handleDragMove,\n    dragStart: handleDragStart\n  });\n}"]},"metadata":{},"sourceType":"script"}