{"ast":null,"code":"import _pt from \"prop-types\";\nvar _excluded = [\"BarsComponent\", \"barPadding\", \"colorAccessor\", \"data\", \"dataKey\", \"onBlur\", \"onFocus\", \"onPointerMove\", \"onPointerOut\", \"onPointerUp\", \"enableEvents\", \"xAccessor\", \"xScale\", \"yAccessor\", \"yScale\"];\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nimport React, { useContext, useCallback, useMemo } from 'react';\nimport DataContext from '../../../context/DataContext';\nimport withRegisteredData from '../../../enhancers/withRegisteredData';\nimport getScaledValueFactory from '../../../utils/getScaledValueFactory';\nimport getScaleBandwidth from '../../../utils/getScaleBandwidth';\nimport getScaleBaseline from '../../../utils/getScaleBaseline';\nimport isValidNumber from '../../../typeguards/isValidNumber';\nimport { BARSERIES_EVENT_SOURCE, XYCHART_EVENT_SOURCE } from '../../../constants';\nimport useSeriesEvents from '../../../hooks/useSeriesEvents'; // Fallback bandwidth estimate assumes no missing data values (divides chart space by # datum)\n\nvar getFallbackBandwidth = function getFallbackBandwidth(fullBarWidth, barPadding) {\n  return (// clamp padding to [0, 1], bar thickness = (1-padding) * availableSpace\n    fullBarWidth * (1 - Math.min(1, Math.max(0, barPadding)))\n  );\n};\n\nfunction BaseBarSeries(_ref) {\n  var _ref2, _colorScale, _theme$colors;\n\n  var BarsComponent = _ref.BarsComponent,\n      _ref$barPadding = _ref.barPadding,\n      barPadding = _ref$barPadding === void 0 ? 0.1 : _ref$barPadding,\n      colorAccessor = _ref.colorAccessor,\n      data = _ref.data,\n      dataKey = _ref.dataKey,\n      onBlur = _ref.onBlur,\n      onFocus = _ref.onFocus,\n      onPointerMove = _ref.onPointerMove,\n      onPointerOut = _ref.onPointerOut,\n      onPointerUp = _ref.onPointerUp,\n      _ref$enableEvents = _ref.enableEvents,\n      enableEvents = _ref$enableEvents === void 0 ? true : _ref$enableEvents,\n      xAccessor = _ref.xAccessor,\n      xScale = _ref.xScale,\n      yAccessor = _ref.yAccessor,\n      yScale = _ref.yScale,\n      barComponentProps = _objectWithoutPropertiesLoose(_ref, _excluded);\n\n  var _useContext = useContext(DataContext),\n      colorScale = _useContext.colorScale,\n      horizontal = _useContext.horizontal,\n      theme = _useContext.theme,\n      _useContext$innerWidt = _useContext.innerWidth,\n      innerWidth = _useContext$innerWidt === void 0 ? 0 : _useContext$innerWidt,\n      _useContext$innerHeig = _useContext.innerHeight,\n      innerHeight = _useContext$innerHeig === void 0 ? 0 : _useContext$innerHeig;\n\n  var getScaledX = useCallback(getScaledValueFactory(xScale, xAccessor), [xScale, xAccessor]);\n  var getScaledY = useCallback(getScaledValueFactory(yScale, yAccessor), [yScale, yAccessor]);\n  var scaleBandwidth = getScaleBandwidth(horizontal ? yScale : xScale);\n  var barThickness = scaleBandwidth || getFallbackBandwidth((horizontal ? innerHeight : innerWidth) / data.length, barPadding);\n  var xZeroPosition = useMemo(function () {\n    return xScale ? getScaleBaseline(xScale) : 0;\n  }, [xScale]);\n  var yZeroPosition = useMemo(function () {\n    return yScale ? getScaleBaseline(yScale) : 0;\n  }, [yScale]);\n  var color = (_ref2 = (_colorScale = colorScale == null ? void 0 : colorScale(dataKey)) != null ? _colorScale : theme == null ? void 0 : (_theme$colors = theme.colors) == null ? void 0 : _theme$colors[0]) != null ? _ref2 : '#222';\n  var bars = useMemo(function () {\n    var xOffset = horizontal ? 0 : -barThickness / 2;\n    var yOffset = horizontal ? -barThickness / 2 : 0;\n    return data.map(function (datum, index) {\n      var _colorAccessor;\n\n      var x = getScaledX(datum) + xOffset;\n      if (!isValidNumber(x)) return null;\n      var y = getScaledY(datum) + yOffset;\n      if (!isValidNumber(y)) return null;\n      var barLength = horizontal ? x - xZeroPosition : y - yZeroPosition;\n      if (!isValidNumber(barLength)) return null;\n      return {\n        key: \"\" + index,\n        x: horizontal ? xZeroPosition + Math.min(0, barLength) : x,\n        y: horizontal ? y : yZeroPosition + Math.min(0, barLength),\n        width: horizontal ? Math.abs(barLength) : barThickness,\n        height: horizontal ? barThickness : Math.abs(barLength),\n        fill: (_colorAccessor = colorAccessor == null ? void 0 : colorAccessor(datum, index)) != null ? _colorAccessor : color\n      };\n    }).filter(function (bar) {\n      return bar;\n    });\n  }, [barThickness, color, colorAccessor, data, getScaledX, getScaledY, horizontal, xZeroPosition, yZeroPosition]);\n  var ownEventSourceKey = BARSERIES_EVENT_SOURCE + \"-\" + dataKey;\n  var eventEmitters = useSeriesEvents({\n    dataKey: dataKey,\n    enableEvents: enableEvents,\n    onBlur: onBlur,\n    onFocus: onFocus,\n    onPointerMove: onPointerMove,\n    onPointerOut: onPointerOut,\n    onPointerUp: onPointerUp,\n    source: ownEventSourceKey,\n    allowedSources: [XYCHART_EVENT_SOURCE, ownEventSourceKey]\n  });\n  return /*#__PURE__*/React.createElement(\"g\", {\n    className: \"vx-bar-series\"\n  }, /*#__PURE__*/React.createElement(BarsComponent, _extends({\n    bars: bars,\n    horizontal: horizontal,\n    xScale: xScale,\n    yScale: yScale\n  }, eventEmitters, barComponentProps)));\n}\n\nBaseBarSeries.propTypes = {\n  barPadding: _pt.number,\n  colorAccessor: _pt.func\n};\nexport default withRegisteredData(BaseBarSeries);","map":{"version":3,"sources":["/Users/jan/dev/thesis/ml_runner/react/ml-runner/node_modules/@visx/xychart/esm/components/series/private/BaseBarSeries.js"],"names":["_pt","_excluded","_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","apply","_objectWithoutPropertiesLoose","excluded","sourceKeys","keys","indexOf","React","useContext","useCallback","useMemo","DataContext","withRegisteredData","getScaledValueFactory","getScaleBandwidth","getScaleBaseline","isValidNumber","BARSERIES_EVENT_SOURCE","XYCHART_EVENT_SOURCE","useSeriesEvents","getFallbackBandwidth","fullBarWidth","barPadding","Math","min","max","BaseBarSeries","_ref","_ref2","_colorScale","_theme$colors","BarsComponent","_ref$barPadding","colorAccessor","data","dataKey","onBlur","onFocus","onPointerMove","onPointerOut","onPointerUp","_ref$enableEvents","enableEvents","xAccessor","xScale","yAccessor","yScale","barComponentProps","_useContext","colorScale","horizontal","theme","_useContext$innerWidt","innerWidth","_useContext$innerHeig","innerHeight","getScaledX","getScaledY","scaleBandwidth","barThickness","xZeroPosition","yZeroPosition","color","colors","bars","xOffset","yOffset","map","datum","index","_colorAccessor","x","y","barLength","width","abs","height","fill","filter","bar","ownEventSourceKey","eventEmitters","allowedSources","createElement","className","propTypes","number","func"],"mappings":"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","sourcesContent":["import _pt from \"prop-types\";\nvar _excluded = [\"BarsComponent\", \"barPadding\", \"colorAccessor\", \"data\", \"dataKey\", \"onBlur\", \"onFocus\", \"onPointerMove\", \"onPointerOut\", \"onPointerUp\", \"enableEvents\", \"xAccessor\", \"xScale\", \"yAccessor\", \"yScale\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React, { useContext, useCallback, useMemo } from 'react';\nimport DataContext from '../../../context/DataContext';\nimport withRegisteredData from '../../../enhancers/withRegisteredData';\nimport getScaledValueFactory from '../../../utils/getScaledValueFactory';\nimport getScaleBandwidth from '../../../utils/getScaleBandwidth';\nimport getScaleBaseline from '../../../utils/getScaleBaseline';\nimport isValidNumber from '../../../typeguards/isValidNumber';\nimport { BARSERIES_EVENT_SOURCE, XYCHART_EVENT_SOURCE } from '../../../constants';\nimport useSeriesEvents from '../../../hooks/useSeriesEvents';\n\n// Fallback bandwidth estimate assumes no missing data values (divides chart space by # datum)\nvar getFallbackBandwidth = function getFallbackBandwidth(fullBarWidth, barPadding) {\n  return (// clamp padding to [0, 1], bar thickness = (1-padding) * availableSpace\n    fullBarWidth * (1 - Math.min(1, Math.max(0, barPadding)))\n  );\n};\n\nfunction BaseBarSeries(_ref) {\n  var _ref2, _colorScale, _theme$colors;\n\n  var BarsComponent = _ref.BarsComponent,\n      _ref$barPadding = _ref.barPadding,\n      barPadding = _ref$barPadding === void 0 ? 0.1 : _ref$barPadding,\n      colorAccessor = _ref.colorAccessor,\n      data = _ref.data,\n      dataKey = _ref.dataKey,\n      onBlur = _ref.onBlur,\n      onFocus = _ref.onFocus,\n      onPointerMove = _ref.onPointerMove,\n      onPointerOut = _ref.onPointerOut,\n      onPointerUp = _ref.onPointerUp,\n      _ref$enableEvents = _ref.enableEvents,\n      enableEvents = _ref$enableEvents === void 0 ? true : _ref$enableEvents,\n      xAccessor = _ref.xAccessor,\n      xScale = _ref.xScale,\n      yAccessor = _ref.yAccessor,\n      yScale = _ref.yScale,\n      barComponentProps = _objectWithoutPropertiesLoose(_ref, _excluded);\n\n  var _useContext = useContext(DataContext),\n      colorScale = _useContext.colorScale,\n      horizontal = _useContext.horizontal,\n      theme = _useContext.theme,\n      _useContext$innerWidt = _useContext.innerWidth,\n      innerWidth = _useContext$innerWidt === void 0 ? 0 : _useContext$innerWidt,\n      _useContext$innerHeig = _useContext.innerHeight,\n      innerHeight = _useContext$innerHeig === void 0 ? 0 : _useContext$innerHeig;\n\n  var getScaledX = useCallback(getScaledValueFactory(xScale, xAccessor), [xScale, xAccessor]);\n  var getScaledY = useCallback(getScaledValueFactory(yScale, yAccessor), [yScale, yAccessor]);\n  var scaleBandwidth = getScaleBandwidth(horizontal ? yScale : xScale);\n  var barThickness = scaleBandwidth || getFallbackBandwidth((horizontal ? innerHeight : innerWidth) / data.length, barPadding);\n  var xZeroPosition = useMemo(function () {\n    return xScale ? getScaleBaseline(xScale) : 0;\n  }, [xScale]);\n  var yZeroPosition = useMemo(function () {\n    return yScale ? getScaleBaseline(yScale) : 0;\n  }, [yScale]);\n  var color = (_ref2 = (_colorScale = colorScale == null ? void 0 : colorScale(dataKey)) != null ? _colorScale : theme == null ? void 0 : (_theme$colors = theme.colors) == null ? void 0 : _theme$colors[0]) != null ? _ref2 : '#222';\n  var bars = useMemo(function () {\n    var xOffset = horizontal ? 0 : -barThickness / 2;\n    var yOffset = horizontal ? -barThickness / 2 : 0;\n    return data.map(function (datum, index) {\n      var _colorAccessor;\n\n      var x = getScaledX(datum) + xOffset;\n      if (!isValidNumber(x)) return null;\n      var y = getScaledY(datum) + yOffset;\n      if (!isValidNumber(y)) return null;\n      var barLength = horizontal ? x - xZeroPosition : y - yZeroPosition;\n      if (!isValidNumber(barLength)) return null;\n      return {\n        key: \"\" + index,\n        x: horizontal ? xZeroPosition + Math.min(0, barLength) : x,\n        y: horizontal ? y : yZeroPosition + Math.min(0, barLength),\n        width: horizontal ? Math.abs(barLength) : barThickness,\n        height: horizontal ? barThickness : Math.abs(barLength),\n        fill: (_colorAccessor = colorAccessor == null ? void 0 : colorAccessor(datum, index)) != null ? _colorAccessor : color\n      };\n    }).filter(function (bar) {\n      return bar;\n    });\n  }, [barThickness, color, colorAccessor, data, getScaledX, getScaledY, horizontal, xZeroPosition, yZeroPosition]);\n  var ownEventSourceKey = BARSERIES_EVENT_SOURCE + \"-\" + dataKey;\n  var eventEmitters = useSeriesEvents({\n    dataKey: dataKey,\n    enableEvents: enableEvents,\n    onBlur: onBlur,\n    onFocus: onFocus,\n    onPointerMove: onPointerMove,\n    onPointerOut: onPointerOut,\n    onPointerUp: onPointerUp,\n    source: ownEventSourceKey,\n    allowedSources: [XYCHART_EVENT_SOURCE, ownEventSourceKey]\n  });\n  return /*#__PURE__*/React.createElement(\"g\", {\n    className: \"vx-bar-series\"\n  }, /*#__PURE__*/React.createElement(BarsComponent, _extends({\n    bars: bars,\n    horizontal: horizontal,\n    xScale: xScale,\n    yScale: yScale\n  }, eventEmitters, barComponentProps)));\n}\n\nBaseBarSeries.propTypes = {\n  barPadding: _pt.number,\n  colorAccessor: _pt.func\n};\nexport default withRegisteredData(BaseBarSeries);"]},"metadata":{},"sourceType":"module"}